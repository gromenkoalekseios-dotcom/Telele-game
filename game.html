<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>‚ö° POWER CLICKER</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
  :root { --bg:#050510; --accent:#00ffcc; --accent2:#ff00aa; --accent3:#ffee00; }
  * { margin:0; padding:0; box-sizing:border-box; -webkit-tap-highlight-color:transparent; }
  html,body { width:100%; height:100%; overflow:hidden; background:var(--bg); font-family:'Share Tech Mono',monospace; color:var(--accent); }
  body::before { content:''; position:fixed; inset:0; background-image:linear-gradient(rgba(0,255,204,0.03) 1px,transparent 1px),linear-gradient(90deg,rgba(0,255,204,0.03) 1px,transparent 1px); background-size:30px 30px; pointer-events:none; z-index:0; }

  .app { display:flex; flex-direction:column; height:100vh; height:100dvh; position:relative; z-index:1; }

  .header { display:flex; align-items:center; justify-content:space-between; padding:8px 14px 4px; flex-shrink:0; }
  .logo { font-family:'Orbitron',monospace; font-size:1rem; font-weight:900; letter-spacing:0.2em; color:var(--accent); text-shadow:0 0 15px #00ffcc88; }
  .save-dot { width:8px; height:8px; border-radius:50%; background:#00ffcc22; transition:all 0.3s; }
  .save-dot.saving { background:var(--accent3); box-shadow:0 0 8px var(--accent3); }
  .save-dot.saved  { background:var(--accent);  box-shadow:0 0 8px var(--accent); }
  .save-dot.error  { background:var(--accent2); box-shadow:0 0 8px var(--accent2); }

  .center { display:flex; flex-direction:column; align-items:center; justify-content:center; flex-shrink:0; padding:6px 0 10px; gap:5px; }
  .score-label { font-size:0.52rem; letter-spacing:0.3em; color:#00ffcc33; }
  .score { font-family:'Orbitron',monospace; font-size:2.4rem; font-weight:900; color:var(--accent); text-shadow:0 0 25px #00ffcc99; line-height:1; }
  .per-sec { font-size:0.62rem; color:var(--accent2); text-shadow:0 0 8px var(--accent2); letter-spacing:0.1em; }

  .click-btn {
    width:130px; height:130px; border-radius:50%;
    border:2px solid var(--accent);
    background:radial-gradient(circle at 40% 35%,#001a14,#000508);
    cursor:pointer; display:flex; align-items:center; justify-content:center; font-size:3.2rem;
    box-shadow:0 0 25px #00ffcc44,inset 0 0 25px #00ffcc0d;
    transition:transform 0.07s,box-shadow 0.07s; user-select:none; position:relative;
  }
  .click-btn::after { content:''; position:absolute; inset:-6px; border-radius:50%; border:1.5px solid var(--accent); opacity:0; animation:ring 3s ease-in-out infinite; }
  @keyframes ring { 0%,100%{opacity:0;transform:scale(1)} 50%{opacity:0.2;transform:scale(1.05)} }
  .click-btn:active { transform:scale(0.90); box-shadow:0 0 60px #00ffccaa,inset 0 0 30px #00ffcc22; }
  .click-info { font-size:0.56rem; color:#00ffcc33; letter-spacing:0.1em; }

  .tabs { display:flex; border-top:1px solid #00ffcc18; border-bottom:1px solid #00ffcc18; flex-shrink:0; }
  .tab { flex:1; background:none; border:none; color:#00ffcc44; font-family:'Orbitron',monospace; font-size:0.52rem; letter-spacing:0.1em; padding:8px 2px; cursor:pointer; transition:color 0.2s,background 0.2s; text-transform:uppercase; }
  .tab.active { color:var(--accent); background:#00ffcc0a; text-shadow:0 0 8px var(--accent); }

  .panels { flex:1; overflow:hidden; position:relative; }
  .panel { position:absolute; inset:0; overflow-y:auto; padding:8px 10px 16px; display:none; -webkit-overflow-scrolling:touch; }
  .panel.active { display:block; }
  .panel::-webkit-scrollbar { width:3px; }
  .panel::-webkit-scrollbar-thumb { background:#00ffcc22; border-radius:2px; }

  .item-btn { width:100%; background:#000; border:1px solid #00ffcc18; color:var(--accent); font-family:'Share Tech Mono',monospace; font-size:0.7rem; padding:10px 12px; margin-bottom:6px; cursor:pointer; display:flex; justify-content:space-between; align-items:center; transition:border-color 0.15s,background 0.15s; text-align:left; border-radius:2px; }
  .item-btn:active:not(.locked) { border-color:var(--accent); background:#00ffcc08; }
  .item-btn.locked { opacity:0.25; }
  .item-left { display:flex; flex-direction:column; gap:2px; }
  .item-name { color:var(--accent); font-size:0.7rem; }
  .item-desc { font-size:0.56rem; color:#00ffcc44; }
  .item-owned { font-size:0.54rem; color:var(--accent2); }
  .item-cost { color:var(--accent3); font-size:0.66rem; white-space:nowrap; padding-left:8px; }

  .prestige-wrap { margin-top:8px; }
  .prestige-btn { width:100%; background:linear-gradient(135deg,#1a0020,#0a000f); border:1px solid var(--accent2); color:var(--accent2); font-family:'Orbitron',monospace; font-size:0.58rem; letter-spacing:0.08em; padding:12px 8px; cursor:pointer; text-shadow:0 0 10px var(--accent2); border-radius:2px; }
  .prestige-btn.locked { opacity:0.2; }
  .prestige-info { font-size:0.54rem; color:var(--accent2); text-align:center; margin-top:5px; line-height:1.7; }

  .stat-row { display:flex; justify-content:space-between; padding:9px 0; border-bottom:1px solid #00ffcc0a; font-size:0.66rem; }
  .stat-row:last-child { border-bottom:none; }
  .stat-label { color:#00ffcc44; }
  .stat-val { color:var(--accent); }

  .float-text { position:fixed; font-family:'Orbitron',monospace; font-weight:700; pointer-events:none; z-index:500; animation:floatUp 0.85s ease-out forwards; }
  @keyframes floatUp { 0%{opacity:1;transform:translateY(0) scale(1)} 100%{opacity:0;transform:translateY(-65px) scale(0.5)} }

  .notif { position:fixed; bottom:16px; left:50%; transform:translateX(-50%); background:#0a0a1f; border:1px solid var(--accent3); color:var(--accent3); font-family:'Share Tech Mono',monospace; font-size:0.62rem; padding:7px 16px; z-index:200; animation:notifAnim 2s ease forwards; white-space:nowrap; border-radius:2px; }
  @keyframes notifAnim { 0%{opacity:0;bottom:4px} 15%{opacity:1;bottom:16px} 75%{opacity:1;bottom:16px} 100%{opacity:0;bottom:4px} }

  #loading-screen { position:fixed; inset:0; background:var(--bg); display:flex; flex-direction:column; align-items:center; justify-content:center; z-index:1000; gap:14px; }
  .loading-text { font-family:'Orbitron',monospace; font-size:0.7rem; letter-spacing:0.25em; color:var(--accent); animation:blink 1s ease-in-out infinite; }
  @keyframes blink { 0%,100%{opacity:1} 50%{opacity:0.25} }
</style>
</head>
<body>

<div id="loading-screen">
  <div style="font-size:2.5rem">‚ö°</div>
  <div class="loading-text">–ó–ê–ì–†–£–ó–ö–ê...</div>
</div>

<div class="app">
  <div class="header">
    <div class="logo">‚ö° POWER CLICKER</div>
    <div class="save-dot" id="save-dot"></div>
  </div>
  <div class="center">
    <div class="score-label">–≠–ù–ï–†–ì–ò–Ø</div>
    <div class="score" id="score">0</div>
    <div class="per-sec" id="per-sec">+0 / —Å–µ–∫</div>
    <button class="click-btn" onclick="handleClick(event)">‚ö°</button>
    <div class="click-info" id="click-info">–∑–∞ –∫–ª–∏–∫: +1</div>
  </div>
  <div class="tabs">
    <button class="tab active" onclick="switchTab('upgrades',this)">‚ñ∏ –£–õ–£–ß–®–ï–ù–ò–Ø</button>
    <button class="tab" onclick="switchTab('generators',this)">‚óà –ì–ï–ù–ï–†–ê–¢–û–†–´</button>
    <button class="tab" onclick="switchTab('stats',this)">‚â° –°–¢–ê–¢–ò–°–¢–ò–ö–ê</button>
  </div>
  <div class="panels">
    <div class="panel active" id="panel-upgrades"><div id="upgrades-list"></div></div>
    <div class="panel" id="panel-generators">
      <div id="auto-list"></div>
      <div class="prestige-wrap">
        <button class="prestige-btn" id="prestige-btn" onclick="doPrestige()">‚óà PRESTIGE</button>
        <div class="prestige-info" id="prestige-info"></div>
      </div>
    </div>
    <div class="panel" id="panel-stats"><div id="stats-list"></div></div>
  </div>
</div>

<script>
// ‚îÄ‚îÄ Telegram init ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const tg = window.Telegram && window.Telegram.WebApp;
if (tg) { tg.ready(); tg.expand(); if(tg.disableVerticalSwipes) tg.disableVerticalSwipes(); }
const hasCloud = tg && tg.CloudStorage;
const SAVE_KEY = 'clicker_save';

// ‚îÄ‚îÄ –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏–≥—Ä—ã ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const BU = [
  {name:'–£—Å–∏–ª–∏—Ç–µ–ª—å',   desc:'+1 –∑–∞ –∫–ª–∏–∫',   cost:50,     cb:1  },
  {name:'–°—É–ø–µ—Ä–∑–∞—Ä—è–¥',  desc:'+5 –∑–∞ –∫–ª–∏–∫',   cost:300,    cb:5  },
  {name:'–ú–æ–ª–Ω–∏—è',      desc:'+20 –∑–∞ –∫–ª–∏–∫',  cost:2000,   cb:20 },
  {name:'–ü–ª–∞–∑–º–∞',      desc:'+100 –∑–∞ –∫–ª–∏–∫', cost:15000,  cb:100},
  {name:'–ê–Ω—Ç–∏–º–∞—Ç–µ—Ä–∏—è', desc:'+500 –∑–∞ –∫–ª–∏–∫', cost:100000, cb:500},
];
const BG = [
  {name:'–ë–∞—Ç–∞—Ä–µ–π–∫–∞',        desc:'+1/—Å–µ–∫',    cost:100,    ps:1   },
  {name:'–°–æ–ª–Ω–µ—á–Ω–∞—è –ø–∞–Ω–µ–ª—å', desc:'+5/—Å–µ–∫',    cost:500,    ps:5   },
  {name:'–†–µ–∞–∫—Ç–æ—Ä',          desc:'+25/—Å–µ–∫',   cost:3000,   ps:25  },
  {name:'–¢–µ—Ä–º–æ—è–¥–µ—Ä–Ω—ã–π',     desc:'+150/—Å–µ–∫',  cost:20000,  ps:150 },
  {name:'–¢—ë–º–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è',   desc:'+1000/—Å–µ–∫', cost:150000, ps:1000},
];

function price(base, owned, mult) {
  var c = base;
  for (var i = 0; i < owned; i++) c = Math.floor(c * mult);
  return c;
}

// ‚îÄ‚îÄ –°–æ—Å—Ç–æ—è–Ω–∏–µ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
var score=0, clicks=0, earned=0, pCount=0, pMult=1;
var uO=[0,0,0,0,0], gO=[0,0,0,0,0];

function clickPow() {
  var b=0; for(var i=0;i<BU.length;i++) b+=BU[i].cb*uO[i];
  return Math.max(1, Math.floor((1+b)*pMult));
}
function perSec() {
  var s=0; for(var i=0;i<BG.length;i++) s+=BG[i].ps*gO[i];
  return Math.floor(s*pMult);
}
function fmt(n) {
  n=Math.floor(n);
  if(n>=1e9) return (n/1e9).toFixed(2)+'B';
  if(n>=1e6) return (n/1e6).toFixed(2)+'M';
  if(n>=1e3) return (n/1e3).toFixed(1)+'K';
  return ''+n;
}

// ‚îÄ‚îÄ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function buildSave() {
  return JSON.stringify({
    s: Math.floor(score),
    c: Math.floor(clicks),
    e: Math.floor(earned),
    pc: pCount, pm: pMult,
    u: uO.slice(), g: gO.slice()
  });
}

function loadData(str) {
  if (!str) return;
  try {
    var d = JSON.parse(str);
    score=d.s||0; clicks=d.c||0; earned=d.e||0;
    pCount=d.pc||0; pMult=d.pm||1;
    if(d.u) uO=d.u.map(function(x){return Number(x)||0;});
    if(d.g) gO=d.g.map(function(x){return Number(x)||0;});
  } catch(e) {}
}

var dotTimer;
function setDot(cls) {
  var d = document.getElementById('save-dot');
  d.className = 'save-dot ' + cls;
  clearTimeout(dotTimer);
  if (cls) dotTimer = setTimeout(function(){ d.className='save-dot'; }, 2500);
}

function doSave() {
  var data = buildSave();
  setDot('saving');

  // –í—Å–µ–≥–¥–∞ –ø–∏—à–µ–º –≤ localStorage
  try { localStorage.setItem(SAVE_KEY, data); } catch(e){}

  // –ï—Å–ª–∏ –µ—Å—Ç—å CloudStorage ‚Äî –ø–∏—à–µ–º —Ç—É–¥–∞ —Ç–æ–∂–µ
  if (hasCloud) {
    tg.CloudStorage.setItem(SAVE_KEY, data, function(err) {
      setDot(err ? 'error' : 'saved');
    });
  } else {
    setDot('saved');
  }
}

function doLoad(cb) {
  // –ü—Ä–æ–±—É–µ–º CloudStorage
  if (hasCloud) {
    tg.CloudStorage.getItem(SAVE_KEY, function(err, val) {
      if (!err && val && val.length > 5) {
        loadData(val);
      } else {
        // Fallback: localStorage
        try { loadData(localStorage.getItem(SAVE_KEY)); } catch(e){}
      }
      cb();
    });
  } else {
    // –¢–æ–ª—å–∫–æ localStorage
    try { loadData(localStorage.getItem(SAVE_KEY)); } catch(e){}
    cb();
  }
}

var saveTimer;
function scheduleSave() {
  clearTimeout(saveTimer);
  saveTimer = setTimeout(doSave, 1500);
}

// ‚îÄ‚îÄ –ò–≥—Ä–∞ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function handleClick(e) {
  var p = clickPow();
  score += p; clicks++; earned += p;

  var el = document.createElement('div');
  el.className = 'float-text';
  el.textContent = '+' + fmt(p);
  el.style.left = (e.clientX-16) + 'px';
  el.style.top  = (e.clientY-16) + 'px';
  var col = Math.random() > 0.5 ? '#00ffcc' : '#ffee00';
  el.style.color = col;
  el.style.textShadow = '0 0 8px ' + col;
  el.style.fontSize = Math.min(0.8 + p/60, 1.8) + 'rem';
  document.body.appendChild(el);
  setTimeout(function(){ el.remove(); }, 850);

  scheduleSave();
  updateUI();
}

function buyU(i) {
  var c = price(BU[i].cost, uO[i], 2.2);
  if (score < c) return;
  score -= c; uO[i]++;
  notify('‚ö° ' + BU[i].name + ' –∫—É–ø–ª–µ–Ω–æ!');
  doSave(); updateUI();
}

function buyG(i) {
  var c = price(BG[i].cost, gO[i], 1.8);
  if (score < c) return;
  score -= c; gO[i]++;
  notify('‚óà ' + BG[i].name + ' –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!');
  doSave(); updateUI();
}

function doPrestige() {
  var thr = 1e6 * Math.pow(5, pCount);
  if (earned < thr) return;
  pCount++; pMult = 1 + pCount * 0.5;
  score=0; earned=0; clicks=0;
  uO=[0,0,0,0,0]; gO=[0,0,0,0,0];
  notify('üåü PRESTIGE x'+pCount+'! –ú–Ω–æ–∂–∏—Ç–µ–ª—å x'+pMult);
  doSave(); updateUI();
}

function notify(msg) {
  var old = document.querySelector('.notif');
  if (old) old.remove();
  var el = document.createElement('div');
  el.className = 'notif'; el.textContent = msg;
  document.body.appendChild(el);
  setTimeout(function(){ el.remove(); }, 2000);
}

function switchTab(name, btn) {
  document.querySelectorAll('.tab').forEach(function(t){ t.classList.remove('active'); });
  document.querySelectorAll('.panel').forEach(function(p){ p.classList.remove('active'); });
  btn.classList.add('active');
  document.getElementById('panel-'+name).classList.add('active');
}

// ‚îÄ‚îÄ UI ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function updateUI() {
  document.getElementById('score').textContent = fmt(score);
  document.getElementById('per-sec').textContent = '+' + fmt(perSec()) + ' / —Å–µ–∫';
  document.getElementById('click-info').textContent = '–∑–∞ –∫–ª–∏–∫: +' + fmt(clickPow());

  var ul = document.getElementById('upgrades-list');
  ul.innerHTML = '';
  for (var i = 0; i < BU.length; i++) {
    (function(idx){
      var c = price(BU[idx].cost, uO[idx], 2.2);
      var btn = document.createElement('button');
      btn.className = 'item-btn' + (score < c ? ' locked' : '');
      btn.innerHTML =
        '<div class="item-left">' +
          '<span class="item-name">' + BU[idx].name + '</span>' +
          '<span class="item-desc">' + BU[idx].desc + '</span>' +
          (uO[idx] ? '<span class="item-owned">–∫—É–ø–ª–µ–Ω–æ: ' + uO[idx] + '</span>' : '') +
        '</div>' +
        '<span class="item-cost">' + fmt(c) + ' ‚ö°</span>';
      btn.addEventListener('click', function(){ buyU(idx); });
      ul.appendChild(btn);
    })(i);
  }

  var gl = document.getElementById('auto-list');
  gl.innerHTML = '';
  for (var j = 0; j < BG.length; j++) {
    (function(idx){
      var c = price(BG[idx].cost, gO[idx], 1.8);
      var btn = document.createElement('button');
      btn.className = 'item-btn' + (score < c ? ' locked' : '');
      btn.innerHTML =
        '<div class="item-left">' +
          '<span class="item-name">' + BG[idx].name + '</span>' +
          '<span class="item-desc">' + BG[idx].desc + '</span>' +
          (gO[idx] ? '<span class="item-owned">–∞–∫—Ç–∏–≤–Ω–æ: ' + gO[idx] + '</span>' : '') +
        '</div>' +
        '<span class="item-cost">' + fmt(c) + ' ‚ö°</span>';
      btn.addEventListener('click', function(){ buyG(idx); });
      gl.appendChild(btn);
    })(j);
  }

  var thr = 1e6 * Math.pow(5, pCount);
  var pb = document.getElementById('prestige-btn');
  pb.className = 'prestige-btn' + (earned < thr ? ' locked' : '');
  pb.textContent = '‚óà PRESTIGE (–Ω—É–∂–Ω–æ ' + fmt(thr) + ' ‚ö°)';
  document.getElementById('prestige-info').innerHTML = pCount
    ? 'Prestige: ' + pCount + '  ¬∑  –ú–Ω–æ–∂–∏—Ç–µ–ª—å: x' + pMult + '<br>–ù–∞–∫–æ–ø–ª–µ–Ω–æ: ' + fmt(earned) + ' / ' + fmt(thr)
    : '–ù–∞–∫–æ–ø–∏ ' + fmt(thr) + ' ‚ö° –¥–ª—è Prestige';

  var saveType = hasCloud ? '‚úì Telegram Cloud' : '‚úì –õ–æ–∫–∞–ª—å–Ω–æ';
  document.getElementById('stats-list').innerHTML =
    '<div class="stat-row"><span class="stat-label">–≠–Ω–µ—Ä–≥–∏—è</span><span class="stat-val">' + fmt(score) + ' ‚ö°</span></div>' +
    '<div class="stat-row"><span class="stat-label">–í—Å–µ–≥–æ –Ω–∞–∫–æ–ø–ª–µ–Ω–æ</span><span class="stat-val">' + fmt(earned) + ' ‚ö°</span></div>' +
    '<div class="stat-row"><span class="stat-label">–ö–ª–∏–∫–æ–≤</span><span class="stat-val">' + fmt(clicks) + '</span></div>' +
    '<div class="stat-row"><span class="stat-label">–ó–∞ –∫–ª–∏–∫</span><span class="stat-val">+' + fmt(clickPow()) + ' ‚ö°</span></div>' +
    '<div class="stat-row"><span class="stat-label">–í —Å–µ–∫—É–Ω–¥—É</span><span class="stat-val">+' + fmt(perSec()) + ' ‚ö°</span></div>' +
    '<div class="stat-row"><span class="stat-label">Prestige</span><span class="stat-val">' + pCount + 'x</span></div>' +
    '<div class="stat-row"><span class="stat-label">–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ</span><span class="stat-val">' + saveType + '</span></div>';
}

// ‚îÄ‚îÄ –¢–∏–∫–∏ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
setInterval(function() {
  var ps = perSec();
  if (ps > 0) { var g = ps/20; score+=g; earned+=g; updateUI(); }
}, 50);

setInterval(doSave, 10000);
document.addEventListener('visibilitychange', function() {
  if (document.visibilityState === 'hidden') doSave();
});
window.addEventListener('blur', doSave);
window.addEventListener('pagehide', doSave);
window.addEventListener('beforeunload', doSave);

// ‚îÄ‚îÄ –°—Ç–∞—Ä—Ç ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
doLoad(function() {
  document.getElementById('loading-screen').style.display = 'none';
  updateUI();
});
</script>
</body>
</html>
